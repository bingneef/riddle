{"version":3,"sources":["/source/index.config.js"],"names":["angular","module","call","this","factory","$resource","base_url","format","getCallHistory","method","url","verifyToken","controller","$scope","$state","$timeout","navigateTo","navigationTarget","go","$apply","$rootScope","$window","SocketService","activeLevel","paintBackground","status","$on","event","data","kind","value","level","color","sendStatus","start","payload","masterTransmit","answer","checkAnswer","toLowerCase","trim","nextLevel","console","log","isFullScreen","state","orientation","slaveTransmit","goFullScreen","$event","document","getElementById","webkitRequestFullscreen","ondeviceorientation","alpha","checkOrientatation","sequence","sequenceMargin","sequenceStep","requestOrientation","correctOrientation","length","service","socketUrl","socket","io","connect","initiate","on","$broadcast","subscribe","room","emit","unsubscribe","run","$log","debug","levels","key","name","currentLevel","config","$stateProvider","$urlRouterProvider","abstract","views","@","templateUrl","controllerAs","navigation","otherwise","constant","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-885909d611.js","sourcesContent":["(function() {\n  angular.module('App', ['ngCookies', 'ngResource', 'ui.router', 'ui.bootstrap']);\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').factory('Resources', function($resource) {\n    'ngInject';\n    var base_url;\n    base_url = 'http://localhost:9393/api/v1';\n    return $resource(base_url, {\n      format: 'json'\n    }, {\n      'getCallHistory': {\n        method: 'GET',\n        url: base_url + \"/users\"\n      },\n      'verifyToken': {\n        method: 'POST',\n        url: base_url + \"/verify\"\n      }\n    });\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').controller('NavigationController', function($scope, $state, $timeout) {\n    'ngInject';\n    $scope.navigateTo = function(navigationTarget) {\n      $state.go('app.' + navigationTarget);\n      return $timeout(function() {\n        return $scope.$apply();\n      }, 0);\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').controller('HaikuSlaveController', function($rootScope, $scope, $state, $window, $timeout, SocketService) {\n    'ngInject';\n    var activeLevel, paintBackground;\n    activeLevel = 'haiku';\n    $scope.status = {};\n    $rootScope.$on('masterIncoming', function(event, data) {\n      if (data.kind === 'level') {\n        $state.go('slave.' + data.value);\n        return;\n      }\n      if (data.level !== activeLevel) {\n        return;\n      }\n      switch (data.kind) {\n        case 'status':\n          return paintBackground(data.status);\n      }\n    });\n    paintBackground = function(status) {\n      $scope.status.color = status;\n      $timeout(function() {\n        return $scope.status.color = void 0;\n      }, 1000);\n      return $scope.$apply();\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').controller('HaikuController', function($rootScope, $scope, $timeout, SocketService) {\n    'ngInject';\n    var activeLevel, sendStatus;\n    activeLevel = 'haiku';\n    $scope.start = function() {\n      var payload;\n      payload = {\n        level: activeLevel,\n        kind: 'level',\n        value: activeLevel\n      };\n      return SocketService.masterTransmit(payload);\n    };\n    $scope.start();\n    $scope.answer = '';\n    $scope.checkAnswer = function() {\n      if ($scope.answer.toLowerCase().trim() === 'lisanne') {\n        sendStatus('success');\n        return $timeout(function() {\n          return $rootScope.nextLevel();\n        }, 1000);\n      } else {\n        return sendStatus('error');\n      }\n    };\n    sendStatus = function(status) {\n      var payload;\n      payload = {\n        level: activeLevel,\n        kind: 'status',\n        status: status\n      };\n      return SocketService.masterTransmit(payload);\n    };\n    console.log('haiku');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').controller('CompassSlaveController', function($rootScope, $scope, $state, $window, $timeout, SocketService) {\n    'ngInject';\n    var activeLevel, paintBackground;\n    $scope.status = {};\n    $scope.isFullScreen = false;\n    activeLevel = 'compass';\n    $rootScope.$on('masterIncoming', function(event, data) {\n      var payload;\n      if (data.kind === 'level') {\n        $state.go('slave.' + data.value);\n        return;\n      }\n      if (data.level !== activeLevel) {\n        return;\n      }\n      switch (data.kind) {\n        case 'level':\n          return $state.go('slave.' + data.value);\n        case 'status':\n          return paintBackground(data.status);\n        case 'requestOrientation':\n          payload = {\n            kind: 'orientation',\n            state: $scope.orientation\n          };\n          return SocketService.slaveTransmit(payload);\n      }\n    });\n    paintBackground = function(status) {\n      $scope.status.color = status;\n      $timeout(function() {\n        return $scope.status.color = void 0;\n      }, 1000);\n      return $scope.$apply();\n    };\n    $scope.goFullScreen = function($event) {\n      $scope.isFullScreen = true;\n      return document.getElementById(\"control\").webkitRequestFullscreen();\n    };\n    $window.ondeviceorientation = function(event) {\n      $scope.orientation = event.alpha;\n      return $scope.$apply();\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').controller('CompassController', function($rootScope, $scope, $timeout, SocketService) {\n    'ngInject';\n    var activeLevel, checkOrientatation, sequence, sequenceMargin, sequenceStep;\n    sequence = [0, 180, 90, 270];\n    sequenceMargin = 15;\n    sequenceStep = 0;\n    activeLevel = 'compass';\n    $scope.start = function() {\n      var payload;\n      payload = {\n        level: activeLevel,\n        kind: 'level',\n        value: activeLevel\n      };\n      return SocketService.masterTransmit(payload);\n    };\n    $scope.start();\n    $scope.sendStatus = function(status) {\n      var payload;\n      payload = {\n        level: activeLevel,\n        kind: 'status',\n        status: status\n      };\n      return SocketService.masterTransmit(payload);\n    };\n    $scope.requestOrientation = function() {\n      var payload;\n      payload = {\n        level: activeLevel,\n        kind: 'requestOrientation'\n      };\n      return SocketService.masterTransmit(payload);\n    };\n    $rootScope.$on('slaveIncoming', function(event, data) {\n      switch (data.kind) {\n        case 'orientation':\n          return checkOrientatation(data.state);\n      }\n    });\n    checkOrientatation = function(state) {\n      var correctOrientation;\n      correctOrientation = false;\n      switch (sequence[sequenceStep]) {\n        case 0:\n          if (state > 345 || state < 15) {\n            correctOrientation = true;\n          }\n          break;\n        default:\n          if (state > sequence[sequenceStep] - sequenceMargin && state < sequence[sequenceStep] + sequenceMargin) {\n            correctOrientation = true;\n          }\n      }\n      if (correctOrientation) {\n        $scope.sendStatus('success');\n        sequenceStep++;\n      } else {\n        $scope.sendStatus('error');\n      }\n      if (sequenceStep === sequence.length) {\n        return $rootScope.nextLevel();\n      }\n    };\n    console.log('compass');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').service('SocketService', function($rootScope, socketUrl) {\n    'ngInject';\n    return {\n      socket: io.connect(socketUrl),\n      initiate: function() {\n        this.socket.on('slaveIncoming', function(data) {\n          return $rootScope.$broadcast('slaveIncoming', data);\n        });\n        this.socket.on('masterIncoming', function(data) {\n          return $rootScope.$broadcast('masterIncoming', data);\n        });\n        return this.subscribe('abc');\n      },\n      subscribe: function(room) {\n        this.room = room;\n        return this.socket.emit('subscribe', room);\n      },\n      unsubscribe: function(room) {\n        this.room = room;\n        return this.socket.emit('unsubscribe', room);\n      },\n      slaveTransmit: function(data) {\n        data.room = this.room;\n        return this.socket.emit('slaveTransmit', data);\n      },\n      masterTransmit: function(data) {\n        data.room = this.room;\n        return this.socket.emit('masterTransmit', data);\n      }\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').run(function($log, $rootScope, $state, $timeout, SocketService) {\n    'ngInject';\n    $log.debug('runBlock end');\n    SocketService.initiate();\n    $rootScope.levels = [\n      {\n        key: 'haiku',\n        name: 'Haiku'\n      }, {\n        key: 'compass',\n        name: 'Compass'\n      }\n    ];\n    $rootScope.currentLevel = 0;\n    return $rootScope.nextLevel = function() {\n      $rootScope.currentLevel += 1;\n      return $state.go('app.' + $rootScope.levels[$rootScope.currentLevel].key);\n    };\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').config(function($stateProvider, $urlRouterProvider) {\n    'ngInject';\n    $stateProvider.state('slave', {\n      abstract: true\n    }).state('slave.compass', {\n      url: '/slave/compass',\n      views: {\n        '@': {\n          templateUrl: 'app/compass/compass_slave.html',\n          controller: 'CompassSlaveController',\n          controllerAs: 'compass_slave'\n        }\n      }\n    }).state('slave.haiku', {\n      url: '/slave/haiku',\n      views: {\n        '@': {\n          templateUrl: 'app/haiku/haiku_slave.html',\n          controller: 'HaikuSlaveController',\n          controllerAs: 'haiku_slave'\n        }\n      }\n    }).state('app', {\n      abstract: true,\n      views: {\n        'navigation': {\n          controller: 'NavigationController',\n          templateUrl: 'app/navigation/navigation.html'\n        }\n      }\n    }).state('app.compass', {\n      url: '/compass',\n      views: {\n        '@': {\n          templateUrl: 'app/compass/compass.html',\n          controller: 'CompassController',\n          controllerAs: 'compass'\n        }\n      }\n    }).state('app.haiku', {\n      url: '/haiku',\n      views: {\n        '@': {\n          templateUrl: 'app/haiku/haiku.html',\n          controller: 'HaikuController',\n          controllerAs: 'haiku'\n        }\n      }\n    });\n    return $urlRouterProvider.otherwise('/compass');\n  });\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').constant('socketUrl', 'http://83.84.36.136:8000/');\n\n}).call(this);\n\n\n\n(function() {\n  angular.module('App').config(function($logProvider) {\n    'ngInject';\n    return $logProvider.debugEnabled(true);\n  });\n\n}).call(this);\n\n\n\nangular.module(\"App\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/compass/compass.html\",\"<div id=\\\"compass\\\"><button data-ng-click=\\\"sendStatus(\\'success\\')\\\">Send success</button> <button data-ng-click=\\\"sendStatus(\\'warning\\')\\\">Send warning</button> <button data-ng-click=\\\"sendStatus(\\'error\\')\\\">Send error</button> <button data-ng-click=\\\"requestOrientation()\\\">Request orientation</button></div>\");\n$templateCache.put(\"app/compass/compass_slave.html\",\"<div id=\\\"compass-slave\\\"><div class=\\\"colors\\\"><div class=\\\"color-item\\\" data-ng-class=\\\"status.color\\\"></div></div></div>\");\n$templateCache.put(\"app/haiku/haiku.html\",\"<input data-ng-model=\\\"answer\\\"> <button data-ng-click=\\\"checkAnswer()\\\">Check</button>\");\n$templateCache.put(\"app/haiku/haiku_slave.html\",\"<div id=\\\"haiku-slave\\\"><div class=\\\"colors\\\"><div class=\\\"color-item\\\" data-ng-class=\\\"status.color\\\"></div></div></div>\");\n$templateCache.put(\"app/navigation/navigation.html\",\"\");}]);"],"sourceRoot":"/source/"}