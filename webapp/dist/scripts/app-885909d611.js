(function(){angular.module("App",["ngCookies","ngResource","ui.router","ui.bootstrap"])}).call(this),function(){angular.module("App").factory("Resources",["$resource",function(t){"ngInject";var e;return e="http://localhost:9393/api/v1",t(e,{format:"json"},{getCallHistory:{method:"GET",url:e+"/users"},verifyToken:{method:"POST",url:e+"/verify"}})}])}.call(this),function(){angular.module("App").controller("NavigationController",["$scope","$state","$timeout",function(t,e,n){"ngInject";t.navigateTo=function(o){return e.go("app."+o),n(function(){return t.$apply()},0)}}])}.call(this),function(){angular.module("App").controller("HaikuSlaveController",["$rootScope","$scope","$state","$window","$timeout","SocketService",function(t,e,n,o,a,r){"ngInject";var s,i;s="haiku",e.status={},t.$on("masterIncoming",function(t,e){if("level"===e.kind)return void n.go("slave."+e.value);if(e.level===s)switch(e.kind){case"status":return i(e.status)}}),i=function(t){return e.status.color=t,a(function(){return e.status.color=void 0},1e3),e.$apply()}}])}.call(this),function(){angular.module("App").controller("HaikuController",["$rootScope","$scope","$timeout","SocketService",function(t,e,n,o){"ngInject";var a,r;a="haiku",e.start=function(){var t;return t={level:a,kind:"level",value:a},o.masterTransmit(t)},e.start(),e.answer="",e.checkAnswer=function(){return"lisanne"===e.answer.toLowerCase().trim()?(r("success"),n(function(){return t.nextLevel()},1e3)):r("error")},r=function(t){var e;return e={level:a,kind:"status",status:t},o.masterTransmit(e)},console.log("haiku")}])}.call(this),function(){angular.module("App").controller("CompassSlaveController",["$rootScope","$scope","$state","$window","$timeout","SocketService",function(t,e,n,o,a,r){"ngInject";var s,i;e.status={},e.isFullScreen=!1,s="compass",t.$on("masterIncoming",function(t,o){var a;if("level"===o.kind)return void n.go("slave."+o.value);if(o.level===s)switch(o.kind){case"level":return n.go("slave."+o.value);case"status":return i(o.status);case"requestOrientation":return a={kind:"orientation",state:e.orientation},r.slaveTransmit(a)}}),i=function(t){return e.status.color=t,a(function(){return e.status.color=void 0},1e3),e.$apply()},e.goFullScreen=function(t){return e.isFullScreen=!0,document.getElementById("control").webkitRequestFullscreen()},o.ondeviceorientation=function(t){return e.orientation=t.alpha,e.$apply()}}])}.call(this),function(){angular.module("App").controller("CompassController",["$rootScope","$scope","$timeout","SocketService",function(t,e,n,o){"ngInject";var a,r,s,i,l;s=[0,180,90,270],i=15,l=0,a="compass",e.start=function(){var t;return t={level:a,kind:"level",value:a},o.masterTransmit(t)},e.start(),e.sendStatus=function(t){var e;return e={level:a,kind:"status",status:t},o.masterTransmit(e)},e.requestOrientation=function(){var t;return t={level:a,kind:"requestOrientation"},o.masterTransmit(t)},t.$on("slaveIncoming",function(t,e){switch(e.kind){case"orientation":return r(e.state)}}),r=function(n){var o;switch(o=!1,s[l]){case 0:(n>345||15>n)&&(o=!0);break;default:n>s[l]-i&&n<s[l]+i&&(o=!0)}return o?(e.sendStatus("success"),l++):e.sendStatus("error"),l===s.length?t.nextLevel():void 0},console.log("compass")}])}.call(this),function(){angular.module("App").service("SocketService",["$rootScope","socketUrl",function(t,e){"ngInject";return{socket:io.connect(e),initiate:function(){return this.socket.on("slaveIncoming",function(e){return t.$broadcast("slaveIncoming",e)}),this.socket.on("masterIncoming",function(e){return t.$broadcast("masterIncoming",e)}),this.subscribe("abc")},subscribe:function(t){return this.room=t,this.socket.emit("subscribe",t)},unsubscribe:function(t){return this.room=t,this.socket.emit("unsubscribe",t)},slaveTransmit:function(t){return t.room=this.room,this.socket.emit("slaveTransmit",t)},masterTransmit:function(t){return t.room=this.room,this.socket.emit("masterTransmit",t)}}}])}.call(this),function(){angular.module("App").run(["$log","$rootScope","$state","$timeout","SocketService",function(t,e,n,o,a){"ngInject";return t.debug("runBlock end"),a.initiate(),e.levels=[{key:"haiku",name:"Haiku"},{key:"compass",name:"Compass"}],e.currentLevel=0,e.nextLevel=function(){return e.currentLevel+=1,n.go("app."+e.levels[e.currentLevel].key)}}])}.call(this),function(){angular.module("App").config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";return t.state("slave",{"abstract":!0}).state("slave.compass",{url:"/slave/compass",views:{"@":{templateUrl:"app/compass/compass_slave.html",controller:"CompassSlaveController",controllerAs:"compass_slave"}}}).state("slave.haiku",{url:"/slave/haiku",views:{"@":{templateUrl:"app/haiku/haiku_slave.html",controller:"HaikuSlaveController",controllerAs:"haiku_slave"}}}).state("app",{"abstract":!0,views:{navigation:{controller:"NavigationController",templateUrl:"app/navigation/navigation.html"}}}).state("app.compass",{url:"/compass",views:{"@":{templateUrl:"app/compass/compass.html",controller:"CompassController",controllerAs:"compass"}}}).state("app.haiku",{url:"/haiku",views:{"@":{templateUrl:"app/haiku/haiku.html",controller:"HaikuController",controllerAs:"haiku"}}}),e.otherwise("/compass")}])}.call(this),function(){angular.module("App").constant("socketUrl","http://83.84.36.136:8000/")}.call(this),function(){angular.module("App").config(["$logProvider",function(t){"ngInject";return t.debugEnabled(!0)}])}.call(this),angular.module("App").run(["$templateCache",function(t){t.put("app/compass/compass.html",'<div id="compass"><button data-ng-click="sendStatus(\'success\')">Send success</button> <button data-ng-click="sendStatus(\'warning\')">Send warning</button> <button data-ng-click="sendStatus(\'error\')">Send error</button> <button data-ng-click="requestOrientation()">Request orientation</button></div>'),t.put("app/compass/compass_slave.html",'<div id="compass-slave"><div class="colors"><div class="color-item" data-ng-class="status.color"></div></div></div>'),t.put("app/haiku/haiku.html",'<input data-ng-model="answer"> <button data-ng-click="checkAnswer()">Check</button>'),t.put("app/haiku/haiku_slave.html",'<div id="haiku-slave"><div class="colors"><div class="color-item" data-ng-class="status.color"></div></div></div>'),t.put("app/navigation/navigation.html","")}]);
//# sourceMappingURL=../maps/scripts/app-885909d611.js.map
